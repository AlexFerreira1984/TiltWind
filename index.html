connectButton.addEventListener("click", async () => {
  try {
    statusDiv.textContent = "Status: Connecting...";

    // Request BLE device
    device = await navigator.bluetooth.requestDevice({
      acceptAllDevices: false,
      filters: [{ name: "TiltWind" }],  // Your device's name
      optionalServices: [
        "0000180f-0000-1000-8000-00805f9b34fb"  // Battery Service
      ]
    });

    server = await device.gatt.connect();
    statusDiv.textContent = "Status: Connected";

    connectButton.disabled = true;
    disconnectButton.disabled = false;

    // Access Services and Characteristics
    const batteryService = await server.getPrimaryService("0000180f-0000-1000-8000-00805f9b34fb");
    characteristics.windDirection = await batteryService.getCharacteristic("00002a6d-0000-1000-8000-00805f9b34fb");
    characteristics.windSpeed = await batteryService.getCharacteristic("00002a70-0000-1000-8000-00805f9b34fb");
    characteristics.gustSpeed = await batteryService.getCharacteristic("00002a71-0000-1000-8000-00805f9b34fb");

    // Read and Update Live Values
    updateValues();
    setInterval(updateValues, 10000);
  } catch (error) {
    console.error("Error:", error);
    statusDiv.textContent = "Status: Error - " + error.message;
  }
});
